<!doctype html>
<html>
    <head>
        <title>3D JavaScript Grapher</title>
        <style>
            html, body { margin: 0; padding: 0; overflow: hidden; }
            #graph {
                height: 50%;
            }
        </style>
    </head>
    <body>
        <div id='content'>
        <div id='graph'>
        </div>
        <div id='input'>
        </div>
        <script type='text/javascript' src='three.min.js'></script>
        <script type='text/javascript' src='OrbitControls.js'></script>
        <script type='text/javascript'>
            var scene = new THREE.Scene();
            var aspect = window.innerWidth / window.innerHeight;
            var camera = new THREE.PerspectiveCamera( 75, aspect, 0.1, 300 );
            var renderer = new THREE.WebGLRenderer( { alpha: true } );
            
            renderer.setSize( window.innerWidth, window.innerHeight );
            document.getElementById('graph').appendChild( renderer.domElement );
            
            var controls = new THREE.OrbitControls( camera );
            
            var group = new THREE.Group();
            scene.add( group );
            
            var points = [];
            var number = 20;
            for (var z = -1 * number; z <= number; z++) {
                
                for (var x = -1 * number; x <= number; x++) {                    
                    geometry = new THREE.BoxGeometry( 1, 1, 1 );
                    material = new THREE.MeshPhongMaterial( { color: 0x6666ff } );
                    var point = new THREE.Mesh( geometry, material );
                    points.push(point);
                    point.position.x = x;
                    point.position.z = z;
                    point.position.y = Math.sin( ((x * x) + (z * z)) / 30 ) * 2;
                    group.add( point );
                }
                
            }
            
            
            var light = new THREE.PointLight( 0xffffff, 2, 200 );
            light.position.set( 0, 5, 0 );
            scene.add( light );
            
            camera.position.y = 30;
            camera.position.z = 30;
            
            
            var render = function() {
                requestAnimationFrame( render );
                controls.update();
                
                var d = new Date();
                
                for (var i in points) {
                    var x = points[i].position.x;
                    var z = points[i].position.z;
                    points[i].position.y = Math.sin( ( d.getTime() / 50 + (x * x) + (z * z)) / 30 ) * 1;
                }
                
                
                renderer.render( scene, camera );
            };
            
            render();
        </script>
        </div>
    </body>
</html>